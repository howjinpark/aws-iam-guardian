name: Integration Tests

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  # 간단한 통합 테스트
  integration-test:
    name: 통합 테스트
    runs-on: ubuntu-latest
    
    steps:
      - name: 코드 체크아웃
        uses: actions/checkout@v4
      
      - name: Python 설정
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: 기본 검증
        run: |
          echo "=== Auth Service 검증 ==="
          cd services/auth-service
          pip install -r requirements.txt
          python -c "from app.main import app; print('✅ Auth Service OK')"
          
          echo "=== IAM Manager 검증 ==="
          cd ../iam-manager
          pip install -r requirements.txt
          python -c "from app.main import app; print('✅ IAM Manager OK')"
          
          echo "=== 통합 테스트 완료 ==="